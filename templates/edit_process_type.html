{% extends "base.html" %}

{% block content %}
<div class="card" style="max-width: 700px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
            <h2 style="margin: 0;"><i class="fas fa-edit"></i> Editar Tipo de Proceso</h2>
            <p style="color: var(--text-light); margin: 0.5rem 0 0 0;">{{ process_type.name }}</p>
        </div>
        <a href="{{ url_for('main.manage_process_types') }}" class="button-secondary">
            <i class="fas fa-arrow-left"></i> Volver
        </a>
    </div>

    <form method="POST" action="{{ url_for('main.edit_process_type', pt_id=process_type.id) }}">
        <div class="form-group">
            <label><i class="fas fa-tag"></i> Nombre *</label>
            <input type="text" name="name" required value="{{ process_type.name }}"
                style="width: 100%; padding: 0.8rem; border: 1px solid #e5e7eb; border-radius: 8px;">
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label><i class="fas fa-palette"></i> Color</label>
                <input type="color" name="color" value="{{ process_type.color }}"
                    style="width: 100%; height: 42px; padding: 0.25rem; border: 1px solid #e5e7eb; border-radius: 8px; cursor: pointer;">
            </div>

            <div class="form-group">
                <label><i class="fas fa-icons"></i> Icono</label>
                <select name="icon"
                    style="width: 100%; padding: 0.8rem; border: 1px solid #e5e7eb; border-radius: 8px;">
                    <option value="fa-folder" {% if process_type.icon=='fa-folder' %}selected{% endif %}>ğŸ“ Carpeta
                    </option>
                    <option value="fa-file-alt" {% if process_type.icon=='fa-file-alt' %}selected{% endif %}>ğŸ“„
                        Documento</option>
                    <option value="fa-briefcase" {% if process_type.icon=='fa-briefcase' %}selected{% endif %}>ğŸ’¼
                        MaletÃ­n</option>
                    <option value="fa-clipboard-check" {% if process_type.icon=='fa-clipboard-check' %}selected{% endif
                        %}>ğŸ“‹ Portapapeles</option>
                    <option value="fa-tasks" {% if process_type.icon=='fa-tasks' %}selected{% endif %}>âœ… Tareas</option>
                    <option value="fa-cogs" {% if process_type.icon=='fa-cogs' %}selected{% endif %}>âš™ï¸ ConfiguraciÃ³n
                    </option>
                    <option value="fa-chart-line" {% if process_type.icon=='fa-chart-line' %}selected{% endif %}>ğŸ“ˆ
                        GrÃ¡fico</option>
                    <option value="fa-users" {% if process_type.icon=='fa-users' %}selected{% endif %}>ğŸ‘¥ Usuarios
                    </option>
                    <option value="fa-balance-scale" {% if process_type.icon=='fa-balance-scale' %}selected{% endif %}>
                        âš–ï¸ Legal</option>
                    <option value="fa-calculator" {% if process_type.icon=='fa-calculator' %}selected{% endif %}>ğŸ§®
                        CÃ¡lculos</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label><i class="fas fa-file-invoice"></i> Plantilla de Tareas</label>
            <select name="template_id"
                style="width: 100%; padding: 0.8rem; border: 1px solid #e5e7eb; border-radius: 8px;">
                <option value="">-- Sin plantilla --</option>
                {% for template in templates %}
                <option value="{{ template.id }}" {% if process_type.template_id==template.id %}selected{% endif %}>
                    {{ template.name }}
                </option>
                {% endfor %}
            </select>
            <small style="color: var(--text-light);">Si se selecciona, al crear un proceso de este tipo se crearÃ¡n
                automÃ¡ticamente las tareas de la plantilla.</small>
        </div>

        <div class="form-group">
            <label><i class="fas fa-align-left"></i> DescripciÃ³n</label>
            <textarea name="description" rows="3" placeholder="DescripciÃ³n opcional..."
                style="width: 100%; padding: 0.8rem; border: 1px solid #e5e7eb; border-radius: 8px; resize: vertical;">{{ process_type.description or '' }}</textarea>
        </div>

        <!-- Info Section -->
        <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: var(--text-light); font-size: 0.9rem;">
                <i class="fas fa-info-circle"></i>
                <strong>Ãrea:</strong> {{ process_type.area.name }} &nbsp;|&nbsp;
                <strong>Creado por:</strong> {{ process_type.created_by.full_name }} &nbsp;|&nbsp;
                <strong>Procesos:</strong> {{ process_type.processes.count() }}
            </p>
        </div>

        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
            <a href="{{ url_for('main.manage_process_types') }}" class="button-secondary">
                <i class="fas fa-times"></i> Cancelar
            </a>
            <button type="submit" class="button">
                <i class="fas fa-save"></i> Guardar Cambios
            </button>
        </div>
    </form>
</div>
{% endblock %}