<!-- Task Selector Modal -->
<div id="taskSelectorModal" class="modal-overlay"
    style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; display: none; align-items: center; justify-content: center;">
    <div class="modal-content"
        style="background: white; border-radius: 12px; width: 90%; max-width: 700px; max-height: 80vh; display: flex; flex-direction: column;">
        <div class="modal-header" style="padding: 1.5rem; border-bottom: 1px solid #e5e7eb;">
            <h3 style="margin: 0; color: #1e293b; display: flex; align-items: center; gap: 0.75rem;">
                <i class="fas fa-search"></i>
                Seleccionar Tarea Padre
            </h3>
        </div>

        <div style="padding: 1.5rem; border-bottom: 1px solid #e5e7eb;">
            <div style="position: relative;">
                <i class="fas fa-search"
                    style="position: absolute; left: 1rem; top: 50%; transform: translateY(-50%); color: #9ca3af;"></i>
                <input type="text" id="taskSearchInput" placeholder="Buscar por ID o título de tarea..."
                    style="width: 100%; padding: 0.75rem 1rem 0.75rem 2.5rem; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
            </div>
            <p style="margin: 0.5rem 0 0 0; font-size: 0.875rem; color: #64748b;">
                <i class="fas fa-info-circle"></i> Puedes buscar por número de ID o por palabras del título
            </p>
        </div>

        <div id="taskSearchResults" style="flex: 1; overflow-y: auto; padding: 1rem;">
            <p style="text-align: center; color: #64748b; padding: 2rem;">
                Usa el buscador para encontrar tareas...
            </p>
        </div>

        <div class="modal-footer"
            style="padding: 1rem 1.5rem; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end;">
            <button type="button" onclick="closeTaskSelector()" class="btn-secondary" style="padding: 0.75rem 1.5rem;">
                <i class="fas fa-times"></i> Cancelar
            </button>
        </div>
    </div>
</div>

<style>
    .task-list {
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
    }

    .task-item {
        padding: 1rem;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .task-item:hover {
        border-color: #3b82f6;
        background: #f0f9ff;
        transform: translateY(-1px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .task-item-header {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.5rem;
    }

    .task-id {
        font-weight: 700;
        color: #1e293b;
        font-size: 0.875rem;
    }

    .task-priority {
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: 600;
        color: white;
        text-transform: uppercase;
    }

    .task-item-title {
        font-size: 1rem;
        font-weight: 500;
        color: #334155;
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }

    .task-item-meta {
        display: flex;
        gap: 1rem;
        font-size: 0.875rem;
        color: #64748b;
    }

    .task-item-meta i {
        margin-right: 0.25rem;
    }

    .btn-clear-parent {
        background: none;
        border: none;
        color: #ef4444;
        cursor: pointer;
        padding: 0.25rem 0.5rem;
        border-radius: 4px;
        transition: all 0.2s;
    }

    .btn-clear-parent:hover {
        background: #fee2e2;
    }
</style>